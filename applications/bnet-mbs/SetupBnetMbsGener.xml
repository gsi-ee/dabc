<?xml version="1.0"?>
<dabc version="1">
  <Variables>
     <node0 value="lxi010"/>
     <node1 value="lxi011"/>
     <node2 value="lxi012"/>
     <node3 value="lxi013"/>
     <node4 value="lxi014"/>
     <custport value="16017"/>
  </Variables>
  <Context host="${node1}" name="Gener_${host}">
    <Module name="Generator">
       <FirstProcId value="0"/>
    </Module>
  </Context>
  <Context host="${node2}" name="Gener_${host}">
    <Module name="Generator">
       <FirstProcId value="2"/>
    </Module>
  </Context>
  <Context host="${node3}" name="Gener_${host}">
    <Module name="Generator">
       <FirstProcId value="4"/>
    </Module>
  </Context>
  <Context host="${node4}" name="Gener_${host}">
    <Module name="Generator">
       <FirstProcId value="6"/>
    </Module>
  </Context>
  <Context host="${node0}" name="Controller">
    <Run>
      <lib value="${DABCSYS}/lib/libDabcBnet.so"/>
      <runfunc value="RunTestBnet"/>
      <debugger value="true"/>
    </Run>
    <Application class="bnet::Cluster">
       <NetDevice value="dabc::SocketDevice"/>
       <CtrlBuffer value="2048"/>
       <TransportBuffer value="8192"/>
       <NumEventsCombine value="1"/>
    </Application>
  </Context>
  <Context host="${node1}" name="Read_${host}">
    <Application class="bnet::MbsWorker">
       <NumReadouts value="2"/>
       <Input0Cfg value="${node3}"/>
       <Input1Cfg value="${node4}"/>
    </Application>
  </Context>
  <Context host="${node3}" name="Read_${host}">
    <Application class="bnet::MbsWorker">
       <NumReadouts value="2"/>
       <Input0Cfg value="${node1}"/>
       <Input1Cfg value="${node2}"/>
    </Application>
  </Context>
  <Context host="${node2}" name="Build_${host}"/>
  <Context host="${node4}" name="Build_${host}"/>
  <Defaults>
     <Context name="*">
       <Run>
          <logfile value="${Context}.log"/>
          <loglevel value="3"/>
       </Run>
       <Module name="*">
          <Ratemeter name="Data*" lower="0" upper="20"/>
          <Ratemeter name="Event*" lower="0" upper="20000"/>
       </Module>
     </Context>
     <Context name="Gener*">
        <Run>
          <lib value="libDabcMbs.so"/>
          <ctrl value="false"/>
        </Run>
        <MemoryPool name="Pool">
           <BufferSize value="8192"/>
           <NumBuffers value="100"/>
        </MemoryPool>
        <Module name="Generator" class="mbs::TransmitterModule">
          <InputPort name="Input0" url="lmd://Generator?size=128&numsub=1&procid=${DABCNODEID}"/>
          <OutputPort name="Output0" url="mbs://Transport:${custport}"/>
        </Module>
     </Context>
     <Context name="Read*">
        <Run>
          <lib value="libDabcBnet.so"/>
          <lib value="libDabcMbs.so"/>
          <lib value="libBnetMbs.so"/>
          <loglevel value="3"/>
          <debugger value="true"/>
        </Run>
        <Application class="bnet::MbsWorker">
           <IsSender value="true"/>
           <ReadoutBuffer value="8192"/>
        </Application>
        <Module name="Combiner">
           <Port name="Input*">
              <MbsServerPort value="${custport}"/>
           </Port>
        </Module>
     </Context>
     <Context name="Build*">
        <Run>
          <lib value="libDabcBnet.so"/>
          <lib value="libDabcMbs.so"/>
          <lib value="libBnetMbs.so"/>
          <debugger value="true"/>
        </Run>
        <Application class="bnet::MbsWorker">
           <IsReceiver value="true"/>
           <IsFilter value="false"/>
           <EventBuffer value="8192"/>
        </Application>
     </Context>
  </Defaults>
</dabc>
