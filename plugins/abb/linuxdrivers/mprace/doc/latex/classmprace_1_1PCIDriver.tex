\hypertarget{classmprace_1_1PCIDriver}{
\section{mprace::PCIDriver Class Reference}
\label{classmprace_1_1PCIDriver}\index{mprace::PCIDriver@{mprace::PCIDriver}}
}
Interface between the mprace library and the new \hyperlink{classmprace_1_1PCIDriver}{PCIDriver}.  


{\tt \#include $<$PCIDriver.h$>$}

Inheritance diagram for mprace::PCIDriver:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=71pt]{classmprace_1_1PCIDriver__inherit__graph}
\end{center}
\end{figure}
Collaboration diagram for mprace::PCIDriver:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=71pt]{classmprace_1_1PCIDriver__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{CompactItemize}
\item 
\hypertarget{classmprace_1_1PCIDriver_a0}{
{\bf PCIDriver} (const unsigned int num)}
\label{classmprace_1_1PCIDriver_a0}

\item 
void \hyperlink{classmprace_1_1PCIDriver_a2}{open} ()
\begin{CompactList}\small\item\em Open the device. \item\end{CompactList}\item 
void \hyperlink{classmprace_1_1PCIDriver_a3}{close} ()
\begin{CompactList}\small\item\em Close the device. \item\end{CompactList}\item 
void $\ast$ \hyperlink{classmprace_1_1PCIDriver_a4}{mmap\-Area} (const unsigned int num)
\begin{CompactList}\small\item\em Memory Map a BAR into User Space Memory. \item\end{CompactList}\item 
void \hyperlink{classmprace_1_1PCIDriver_a5}{unmap\-Area} (const unsigned int num)
\begin{CompactList}\small\item\em Release an area previously mapped into User Space Memory. \item\end{CompactList}\item 
unsigned int \hyperlink{classmprace_1_1PCIDriver_a6}{get\-Area\-Size} (const unsigned int num)
\begin{CompactList}\small\item\em Get the size of the area. \item\end{CompactList}\item 
pci\-Driver::Kernel\-Memory \& \hyperlink{classmprace_1_1PCIDriver_a7}{alloc\-Kernel\-Memory} (const unsigned int size)
\begin{CompactList}\small\item\em Allocate Kernel memory, and return an underlying object describing it. \item\end{CompactList}\item 
pci\-Driver::User\-Memory \& \hyperlink{classmprace_1_1PCIDriver_a8}{map\-User\-Memory} (void $\ast$mem, unsigned int size)
\begin{CompactList}\small\item\em Lock user memory, create a SG list for it, and return an underlying object describing it. \item\end{CompactList}\item 
void \hyperlink{classmprace_1_1PCIDriver_a9}{wait\-For\-Interrupt} (unsigned int int\_\-id)
\begin{CompactList}\small\item\em Wait for an Interrupt to arrive. \item\end{CompactList}\end{CompactItemize}
\subsection*{Protected Attributes}
\begin{CompactItemize}
\item 
pci\-Driver::Pci\-Device $\ast$ \hyperlink{classmprace_1_1PCIDriver_p0}{dev}
\begin{CompactList}\small\item\em The underlying Pci\-Device represented by this object. \item\end{CompactList}\item 
void $\ast$ \hyperlink{classmprace_1_1PCIDriver_p1}{bar} \mbox{[}6\mbox{]}
\begin{CompactList}\small\item\em Cache the mmap of the BARs. \item\end{CompactList}\item 
\hypertarget{classmprace_1_1PCIDriver_p2}{
unsigned long $\ast$ {\bf retry\_\-stats\_\-kernel}}
\label{classmprace_1_1PCIDriver_p2}

\end{CompactItemize}
\subsection*{Static Protected Attributes}
\begin{CompactItemize}
\item 
\hypertarget{classmprace_1_1PCIDriver_t0}{
const unsigned int {\bf max\_\-retries} = 20}
\label{classmprace_1_1PCIDriver_t0}

\item 
\hypertarget{classmprace_1_1PCIDriver_t1}{
const unsigned long {\bf retry\_\-sleep} = 10000000L}
\label{classmprace_1_1PCIDriver_t1}

\end{CompactItemize}


\subsection{Detailed Description}
Interface between the mprace library and the new \hyperlink{classmprace_1_1PCIDriver}{PCIDriver}. 

\begin{Desc}
\item[Author:]Guillermo Marcus \end{Desc}
\begin{Desc}
\item[Version:]\begin{Desc}
\item[Revision]1.4 \end{Desc}
\end{Desc}
\begin{Desc}
\item[Date:]\begin{Desc}
\item[Date]2008-01-11 10:30:21 \end{Desc}
\end{Desc}




\subsection{Member Function Documentation}
\hypertarget{classmprace_1_1PCIDriver_a7}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!allocKernelMemory@{allocKernelMemory}}
\index{allocKernelMemory@{allocKernelMemory}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[allocKernelMemory]{\setlength{\rightskip}{0pt plus 5cm}pci\-Driver::Kernel\-Memory \& PCIDriver::alloc\-Kernel\-Memory (const unsigned int {\em size})}}
\label{classmprace_1_1PCIDriver_a7}


Allocate Kernel memory, and return an underlying object describing it. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em size}]Size of the request area, in bytes \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A pci\-Driver::Kernel\-Memory object. \end{Desc}
\begin{Desc}
\item[Exceptions:]
\begin{description}
\item[{\em mprace::Exception}]on Error.\end{description}
\end{Desc}
\hypertarget{classmprace_1_1PCIDriver_a3}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!close@{close}}
\index{close@{close}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[close]{\setlength{\rightskip}{0pt plus 5cm}void PCIDriver::close ()\hspace{0.3cm}{\tt  \mbox{[}virtual\mbox{]}}}}
\label{classmprace_1_1PCIDriver_a3}


Close the device. 



Implements \hyperlink{classmprace_1_1Driver_a2}{mprace::Driver}.\hypertarget{classmprace_1_1PCIDriver_a6}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!getAreaSize@{getAreaSize}}
\index{getAreaSize@{getAreaSize}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[getAreaSize]{\setlength{\rightskip}{0pt plus 5cm}unsigned int PCIDriver::get\-Area\-Size (const unsigned int {\em num})\hspace{0.3cm}{\tt  \mbox{[}virtual\mbox{]}}}}
\label{classmprace_1_1PCIDriver_a6}


Get the size of the area. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em num}]the area number to mmap. BAR0-5. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the size of the area, in bytes.\end{Desc}


Implements \hyperlink{classmprace_1_1Driver_a5}{mprace::Driver}.\hypertarget{classmprace_1_1PCIDriver_a8}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!mapUserMemory@{mapUserMemory}}
\index{mapUserMemory@{mapUserMemory}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[mapUserMemory]{\setlength{\rightskip}{0pt plus 5cm}pci\-Driver::User\-Memory \& PCIDriver::map\-User\-Memory (void $\ast$ {\em mem}, unsigned int {\em size})}}
\label{classmprace_1_1PCIDriver_a8}


Lock user memory, create a SG list for it, and return an underlying object describing it. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em mem}]A pointer to the memory area to map. \item[{\em size}]Size of the request area, in bytes. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A pci\-Driver::Kernel\-Memory object. \end{Desc}
\begin{Desc}
\item[Exceptions:]
\begin{description}
\item[{\em mprace::Exception}]on Error.\end{description}
\end{Desc}
\hypertarget{classmprace_1_1PCIDriver_a4}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!mmapArea@{mmapArea}}
\index{mmapArea@{mmapArea}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[mmapArea]{\setlength{\rightskip}{0pt plus 5cm}void $\ast$ PCIDriver::mmap\-Area (const unsigned int {\em num})\hspace{0.3cm}{\tt  \mbox{[}virtual\mbox{]}}}}
\label{classmprace_1_1PCIDriver_a4}


Memory Map a BAR into User Space Memory. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em num}]the area number to mmap. BAR0-5. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A pointer to access the requested area. \end{Desc}
\begin{Desc}
\item[Exceptions:]
\begin{description}
\item[{\em mprace::Exception}]on Error.\end{description}
\end{Desc}


Implements \hyperlink{classmprace_1_1Driver_a3}{mprace::Driver}.\hypertarget{classmprace_1_1PCIDriver_a2}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!open@{open}}
\index{open@{open}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[open]{\setlength{\rightskip}{0pt plus 5cm}void PCIDriver::open ()\hspace{0.3cm}{\tt  \mbox{[}virtual\mbox{]}}}}
\label{classmprace_1_1PCIDriver_a2}


Open the device. 



Implements \hyperlink{classmprace_1_1Driver_a1}{mprace::Driver}.\hypertarget{classmprace_1_1PCIDriver_a5}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!unmapArea@{unmapArea}}
\index{unmapArea@{unmapArea}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[unmapArea]{\setlength{\rightskip}{0pt plus 5cm}void PCIDriver::unmap\-Area (const unsigned int {\em num})\hspace{0.3cm}{\tt  \mbox{[}virtual\mbox{]}}}}
\label{classmprace_1_1PCIDriver_a5}


Release an area previously mapped into User Space Memory. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em num}]the area number to mmap. BAR0-5. \end{description}
\end{Desc}
\begin{Desc}
\item[Exceptions:]
\begin{description}
\item[{\em mprace::Exception}]on Error.\end{description}
\end{Desc}


Implements \hyperlink{classmprace_1_1Driver_a4}{mprace::Driver}.\hypertarget{classmprace_1_1PCIDriver_a9}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!waitForInterrupt@{waitForInterrupt}}
\index{waitForInterrupt@{waitForInterrupt}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[waitForInterrupt]{\setlength{\rightskip}{0pt plus 5cm}void PCIDriver::wait\-For\-Interrupt (unsigned int {\em int\_\-id})\hspace{0.3cm}{\tt  \mbox{[}virtual\mbox{]}}}}
\label{classmprace_1_1PCIDriver_a9}


Wait for an Interrupt to arrive. 

This is a blocking call. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em int\_\-id}]The ID value of the interrupt to wait for. This is driver dependent.\end{description}
\end{Desc}


Implements \hyperlink{classmprace_1_1Driver_a6}{mprace::Driver}.

\subsection{Member Data Documentation}
\hypertarget{classmprace_1_1PCIDriver_p1}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!bar@{bar}}
\index{bar@{bar}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[bar]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ \hyperlink{classmprace_1_1PCIDriver_p1}{mprace::PCIDriver::bar}\mbox{[}6\mbox{]}\hspace{0.3cm}{\tt  \mbox{[}protected\mbox{]}}}}
\label{classmprace_1_1PCIDriver_p1}


Cache the mmap of the BARs. 

We will map them only once at the opening of the device.\hypertarget{classmprace_1_1PCIDriver_p0}{
\index{mprace::PCIDriver@{mprace::PCIDriver}!dev@{dev}}
\index{dev@{dev}!mprace::PCIDriver@{mprace::PCIDriver}}
\subsubsection[dev]{\setlength{\rightskip}{0pt plus 5cm}pci\-Driver::Pci\-Device$\ast$ \hyperlink{classmprace_1_1PCIDriver_p0}{mprace::PCIDriver::dev}\hspace{0.3cm}{\tt  \mbox{[}protected\mbox{]}}}}
\label{classmprace_1_1PCIDriver_p0}


The underlying Pci\-Device represented by this object. 



The documentation for this class was generated from the following files:\begin{CompactItemize}
\item 
include/mprace/PCIDriver.h\item 
src/lib/PCIDriver.cpp\end{CompactItemize}
