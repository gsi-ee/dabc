<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

   <meta http-equiv="X-UA-Compatible" content="IE=Edge; text/html">
   <title>Objects hierarchy</title>
   
   <link rel="shortcut icon" href="/httpsys/img/dabc.ico">

   <script src="/jsrootsys/scripts/JSRootCore.js?2d&load=/httpsys/scripts/dabc.js&onload=createGUI" type="text/javascript"></script>
   <link rel="stylesheet" type="text/css" href="/httpsys/files/dabc.css" />
   
   <script type='text/javascript'>
   
      function createGUI() {
            var guiCode =
                 '<div id="left-div" class="column">'+
                 '  <h2>Objects</h2>'+
                 "  <p><font face='Verdana' size='1px'><a href='http://dabc.gsi.de'>DABC</a> <span style='color:green'><b>" + DABC.version + "</b></span>, " + 
                 "  <a href='http://root.cern.ch/js/jsroot.html'>JSROOT</a> <span style='color:green'><b>" + JSROOT.version + "</b></span></font></p>" + 
                 '  Hierarchy in <a href="h.json">json</a> and <a href="h.xml">xml</a> format<br/>'+
                 '  <div id="fast_buttons"></div><br/>'+        
                 '  <input type="checkbox" name="monitoring" id="monitoring"/> Monitoring'+        
                 '  Grid <input id="grid_spinner" style="width:40px" value="2"/>' +    
                 '  <div id="dabc_tree_holder"></div>' +
                 '</div>'+
                 '<div id="separator-div" class="separator"></div>' +
                 '<div id="right-div" class="column"></div>';
                 
            $("#mainGUI").empty();     
            $("#mainGUI").append(guiCode);
                 
         
            DABC.hpainter = new DABC.HierarchyPainter("dabc", "dabc_tree_holder");

            $("#grid_spinner").spinner({
               min:1, max:5,
               spin: function( event, ui ) { DABC.hpainter.SetDisplay('grid'+ui.value,'right-div'); }
            }); 
            
            var monitor = JSROOT.GetUrlOption("monitoring");
            
            if (monitor) {
               document.getElementById("monitoring").checked = true;
               document.getElementById("monitoring").disabled = "disabled";
            } 
            
            var itemsarr = JSROOT.GetUrlOptionAsArray("item;items");
            var optionsarr = JSROOT.GetUrlOptionAsArray("opt;opts");
            
            DABC.hpainter.SetDisplay('grid2x2', 'right-div');
            
            DABC.hpainter.OpenOnline("", function() {
               DABC.hpainter.displayAll(itemsarr, optionsarr);
            });
            
            DABC.hpainter.EnableMonitoring(monitor!=null);
            $("#monitoring")
               .prop('checked', monitor!=null)
               .click(function() {
                  DABC.hpainter.EnableMonitoring(this.checked);
                  if (this.checked) DABC.hpainter.UpdateDabcElements();
               });
         
            setInterval(function() { DABC.hpainter.UpdateDabcElements(); }, DABC.hpainter.MonitoringInterval());
            
            JSROOT.RegisterForResize(DABC.hpainter);
            
            JSROOT.ConfigureVSeparator(DABC.hpainter);
            
            // h.CreateStatus(25);
       }

   </script>
</head>

<body>
   <div id="mainGUI">
      loading scripts ...
   </div>
</body>
</html>

