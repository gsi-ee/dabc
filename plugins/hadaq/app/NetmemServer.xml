<?xml version="1.0"?>

<!-- 
This sets up an mbs server for hadaq data as received from trbnet via udp.

-->

<dabc version="2">
  <Context name="NetmemServer">
    <Run>
      <lib value="libDabcMbs.so"/>
       <lib value="libDabcHadaq.so"/>
      <func value="InitHadaqMbsServer"/>
    </Run>
    <MemoryPool name="Pool">
       <BufferSize value="65536"/>
       <NumBuffers value="100"/>
    </MemoryPool>
    <Module name="NetmemServer">
       <Port name="Input">
          <HadaqUdpSender value="0.0.0.0"/>
          <HadaqUdpPort value="10101"/>
          <HadaqUdpBuffer value="1000000"/>
          <HadaqBuildEvents value="true"/>
          <!--HadaqUdpMTU value="64512"/-->   
          <BufferSize value="65536"/>
          <InputQueueSize value="50"/>       
       </Port>
       <Port name="Output">
          <MbsServerKind value="Stream"/>
          <!--MbsServerPort value="6543"/-->
        </Port>
        
          <SubeventFullId value="0x000001F"/>
          <Ratemeter name="*" debug="true" interval="3" width="5" prec="2"/>
     </Module>
  </Context>
</dabc>
