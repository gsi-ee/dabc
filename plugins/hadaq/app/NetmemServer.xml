<?xml version="1.0"?>

<!-- 
This sets up an mbs server for hadaq data as received from trbnet via udp.

-->

<dabc version="2">
  <Context name="NetmemServer">
    <Run>
      <lib value="libDabcMbs.so"/>
       <lib value="libDabcHadaq.so"/>
      <func value="InitHadaqMbsTransmitter"/>
    </Run>
    <MemoryPool name="Pool">
       <BufferSize value="65536"/>
       <NumBuffers value="100"/>
    </MemoryPool>
    <Module name="HldServer">
       <PoolName value="Pool"/>
       <NumInputs value="1"/>
       <NumOutputs value="1"/>
       
       <InputPort name="Input0">
          <url value="hadaq://host:10101"/>
          <QueueSize value="50"/>       
          <HadaqUdpBuffer value="200000"/>
          <HadaqBuildEvents value="true"/>
          <!--HadaqUdpMTU value="64512"/-->   
       </InputPort>
       <OutputPort name="Output0">
          <url value="mbs://Stream"/>
        </OutputPort>
        <SubeventFullId value="0x000001F"/>
        <TransmitData width="5" prec="6" low="5" up="50" debug="1"/>
        <TransmitEvents width="4" prec="3" low="2" up="100000" debug="1"/>
        <TransmitBufs width="4" prec="3" low="2" up="100000" debug="1"/>
     </Module>
  </Context>
</dabc>
