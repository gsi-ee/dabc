<?xml version="1.0"?>
<dabc version="1">
  <Context host="localhost" name="EventBuilder">
    <Run>
      <lib value="libDabcMbs.so"/>
      <lib value="libDabcHadaq.so"/>  
      <func value="InitHadaqEvtbuilder"/>
      <logfile value="hadaqevtbuild.log"/>
      <loglimit value="1000000"/>
    </Run>
  
    <MemoryPool name="Pool">
       <BufferSize value="200000"/>
       <NumBuffers value="10000"/>
    </MemoryPool>
    
     <!-- shmem control config -->
    
    <Module name="Combiner">    
       <PoolName value="Pool"/>
       <DoShmControl value="false"/>  
       <DoFile value="false"/>
       <DoServer value="true"/>
       <BufferSize value="150000"/>
       
       <FlushTimeout value="0.3"/>
       <DoShmControl value="false"/>
       <PrintSync value="false"/>
       <SyncTriggerMask value="0x3"/>
       <FlushBySync value="false"/>

       <!-- take event sequence number from vulom/roc sync message at cts -->
       <UseSyncSequenceNumber value="true"/>
       <SyncSubeventId value="0x8000"/>
       <SyncTriggerMask value="0x01"/>
       <NumInputs value="1"/>
       <Port name="Input0">
          <HadaqUdpPort value="50000"/>
       </Port>
       <Port name="Input1">
          <HadaqUdpPort value="10102"/>
       </Port>
       <Port name="Input2">
          <HadaqUdpPort value="10103"/>
       </Port>
       <Port name="Input3">
          <HadaqUdpPort value="10104"/>
       </Port>
       <Port name="Input4">
          <HadaqUdpPort value="10105"/>
       </Port>       
       <Port name="Input*">
          <HadaqUdpBuffer value="200000"/>
          <DoShmControl value="false"/>  
          <!--HadaqUdpMTU value="64512"/-->   
          <BufferSize value="65536"/>
          <InputQueueSize value="1000"/>
       </Port>
        <Port name="ServerOutput">
          <OutputQueueSize value="1000"/>       
        </Port>  
       <Port name="FileOutput">
          <HadaqFileName value="/data/trb/dabc.hld"/>
          <HadaqEPICSControl value="true"/>
          <HadaqFileSizeLimit value="1600"/>       
        </Port> 
     </Module>
     
     <Module name="OnlineServer">
       <SubeventFullId value="0x000001F"/>
       <DoMergeSyncedEvents value="true"/>
       <PrintSync value="false"/>
       <TransmitData width="5" prec="6" low="5" up="50" debug="1"/>
       <TransmitEvents width="4" prec="3" low="2" up="100000" debug="1"/>
       <PoolName value="Pool"/>
       <Port name="Output">
          <MbsServerKind value="Stream"/>
          <MbsServerPort value="6999"/>
        </Port>
     </Module>
     
  </Context>
</dabc>
