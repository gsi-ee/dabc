<?xml version="1.0"?>
<dabc version="1">
  <Context host="localhost" name="EventBuilder">
    <Run>
      <lib value="libDabcMbs.so"/>
      <lib value="libDabcHadaq.so"/>  
      <func value="InitHadaqEvtbuilder"/>
      <logfile value="hadaqevtbuild.log"/>
      <loglimit value="1000000"/>
    </Run>
    
  
     <MemoryPool name="Pool">
       <BufferSize value="131072"/>
       <NumBuffers value="10000"/>
    </MemoryPool>
    
     <!-- shmem control config -->
   <Observer name="shm">
     <DoShmControl value="true"/>
   </Observer>
    
    <Module name="Combiner">    
       <PoolName value="Pool"/>
       <DoShmControl value="true"/>  
       <DoFile value="false"/>
       <DoServer value="true"/>
       <BufferSize value="65536"/>
       
       <!-- take event sequence number from vulom/roc sync message at cts -->
       <UseSyncSequenceNumber value="true"/>
       <SyncSubeventId value="0x8000"/>
       
       <NumInputs value="1"/>
       <Port name="Input0">
          <HadaqUdpPort value="50000"/>
       </Port>
       <Port name="Input1">
          <HadaqUdpPort value="10102"/>
       </Port>
       <Port name="Input2">
          <HadaqUdpPort value="10103"/>
       </Port>
       <Port name="Input3">
          <HadaqUdpPort value="10104"/>
       </Port>
       <Port name="Input4">
          <HadaqUdpPort value="10105"/>
       </Port>       
       <Port name="Input*">
          <HadaqUdpBuffer value="200000"/>
          <DoShmControl value="true"/>  
          <!--HadaqUdpMTU value="64512"/-->   
          <BufferSize value="65536"/>
          <InputQueueSize value="1000"/>
       </Port>
        <Port name="ServerOutput">
          <OutputQueueSize value="1000"/>       
        </Port>  
       <Port name="FileOutput">
          <HadaqFileName value="/data/trb/dabc.hld"/>
          <HadaqEPICSControl value="true"/>
          <HadaqFileSizeLimit value="1600"/>       
        </Port> 

              
     </Module>
     
     <Module name="OnlineServer">
       <PoolName value="Pool"/>
       <Port name="Output">
          <MbsServerKind value="Stream"/>
          <MbsServerPort value="6543"/>
            <SubeventFullId value="0x000001F"/> 
            <OutputQueueSize value="1000"/>

        </Port>
     </Module>

     
     
  </Context>
</dabc>
