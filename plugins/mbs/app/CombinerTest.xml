<?xml version="1.0"?>
<dabc version="1">
  <Variables>
     <genhost1 value="lxi042"/>
     <genhost2 value="lxi045"/>
     <genhost3 value="lxi038"/>
     <genport value="6000"/>
     <bufsize value="16384"/>
  </Variables>

  <Context host="${genhost1}" name="Generator1"/>
  <Context host="${genhost2}" name="Generator2"/>
  <Context host="${genhost3}" name="Generator3"/>

  <Context host="lxg0526" name="Combiner">
    <Run>
      <lib value="libDabcMbs.so"/>
      <func value="StartMbsCombiner"/>
      <logfile value="combiner.log"/>
      <debugger value="false"/>
    </Run>
    <MemoryPool name="WorkPool">
       <NumBuffers value="100"/>
       <BufferSize value="${bufsize}"/>
    </MemoryPool>
    <Module name="Combiner">
       <NumInputs value="3"/>
       <DoFile value="false"/>
       <DoServer value="true"/>
       <BufferSize value="${bufsize}"/>
       <Port name="Input0">
          <MbsServerName value="${genhost1}"/>
       </Port>
       <Port name="Input1">
          <MbsServerName value="${genhost2}"/>
       </Port>
       <Port name="Input2">
          <MbsServerName value="${genhost3}"/>
       </Port>
       <Port name="Input*">
          <InputQueueSize value="5"/>
          <MbsServerKind value="Transport"/>
          <ConnTimeout value="5"/>
          <MbsServerPort value="${genport}"/>
       </Port>   
       <Port name="FileOutput">
          <OutputQueueSize value="5"/>
          <MbsFileName value="/data.local1/combiner.lmd"/>
          <MbsFileSizeLimit value="500"/>
          <ShowInfo value="true"/>
        </Port>
       <Port name="ServerOutput">
          <OutputQueueSize value="5"/>
          <MbsServerKind value="Stream"/>
        </Port>
        <Ratemeter name="DataRate" lower="0" upper="50" debug="true"/>
     </Module>
  </Context>

  <!-- this is defaults for all generators -->  
  <Context name="Generator*">
   <Run>
     <lib value="libDabcMbs.so"/>
     <func value="InitMbsGenerator"/>
     <logfile value="${Context}.log"/>
     <ctrl value="false"/>
   </Run>
   <MemoryPool name="Pool">
      <NumBuffers value="100"/>
      <BufferSize value="${bufsize}"/>
   </MemoryPool>
   <Module name="Generator">
      <FirstProcId value="${DABCCFGID}"/>
      <NumSubevents value="1"/>
      <BufferSize value="${bufsize}"/>
      <Port name="Output">
         <OutputQueueSize value="5"/>
         <MbsServerKind value="Transport"/>
         <MbsServerPort value="${genport}"/>
       </Port>
   </Module>
  </Context>

  <Defaults>
  </Defaults>
</dabc>
